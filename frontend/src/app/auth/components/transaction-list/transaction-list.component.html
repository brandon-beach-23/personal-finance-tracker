<div class="card shadow-md h-full">
  <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
    <h5 class="card-title mb-0">Transactions for {{ selectedAccountName$ | async }}</h5>

    <!-- Action Buttons -->
    <div class="btn-group" role="group">
      <button type="button"
              class="btn btn-sm btn-light me-2 rounded-lg shadow-sm fw-bold"
              (click)="openAddTransactionModal()">
        <i class="bi bi-plus-circle-fill me-1"></i> Add Transaction
      </button>
      <button type="button"
              class="btn btn-sm btn-outline-light rounded-lg shadow-sm"
              (click)="openEditDeleteTransactionModal()">
        <i class="bi bi-pencil-fill me-1"></i> Edit/Delete
      </button>
    </div>
  </div>

  <div class="card-body p-0">
    <!--
        The correct syntax for *ngFor is:
        <ng-container *ngIf="expression"> <element *ngFor="..."></element> </ng-container>
        or using the structural if/else block pattern below, which is cleaner.
    -->
    <ul class="list-group list-group-flush">

      @if (transactions().length > 0) {

        @for (transaction of transactions(); track transaction.transactionId) {
          <li class="list-group-item d-flex justify-content-between align-items-center account-item">

            <div>
              <div class="fw-bold">{{ transaction.transactionName }}</div>
              <div class="text-sm text-muted">
<!--                {{ transaction.transactionCategory?.categoryName || 'Uncategorized' }}-->
                <span class="mx-2">|</span>
                {{ transaction.transactionDate | date:'shortDate' }}
              </div>
            </div>

            <span class="fw-bold"
                  [class.text-success]="transaction.transactionType === 'CREDIT'"
                  [class.text-danger]="transaction.transactionType === 'DEBIT'">
              {{ transaction.transactionAmount | currency:'USD' }}
            </span>
          </li>
        }
      } @else {


      <li class="list-group-item text-center text-muted p-4">
        @if (transactionService.selectedAccountId$) {
          No transactions found for this account.
        } @else {
          Select an account to view transactions.
          }
      </li>
      }
    </ul>
  </div>
</div>

<app-add-transaction-modal
  *ngIf="isAddTransactionModalOpen()"
  (closeModal)="closeAddTransactionModal()">
</app-add-transaction-modal>

<!--<app-edit-delete-account-modal-->
<!--  *ngIf="isEditDeleteTransactionModalOpen()"-->
<!--  (close)="closeEditDeleteTransactionModal()">-->
<!--</app-edit-delete-account-modal>-->

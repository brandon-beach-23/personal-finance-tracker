<div class="card shadow-sm">
  <div class="card-header bg-primary text-white">
    <h5 class="mb-0">Spending Report</h5>
  </div>

  <div class="card-body">
    <form [formGroup]="reportForm" (ngSubmit)="generateReport()" class="row g-3 align-items-end">
      <div class="col-md-4">
        <label for="month" class="form-label">Month</label>
        <select id="month" formControlName="month" class="form-select">
          <option *ngFor="let m of months" [value]="m.value">{{ m.label }}</option>
        </select>
      </div>

      <div class="col-md-4">
        <label for="year" class="form-label">Year</label>
        <select id="year" formControlName="year" class="form-select">
          <option *ngFor="let y of years" [value]="y">{{ y }}</option>
        </select>
      </div>

      <div class="col-md-4">
        <button type="submit" class="btn btn-success w-100">Generate Report</button>
      </div>
    </form>

    <div *ngIf="report.length > 0" class="mt-4">
      <table class="table table-striped table-hover">
        <thead class="table-light">
        <tr>
          <th>Date</th>
          <th>Account</th>
          <th>Transaction</th>
          <th>Category</th>
          <th class="text-end">Amount</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let tx of report">
          <td>{{ tx.transactionDate | date:'shortDate' }}</td>
          <td>{{ tx.accountName }}</td>
          <td>{{ tx.transactionName }}</td>
          <td>{{ tx.categoryName || 'Uncategorized' }}</td>
          <td class="text-end">
              <span [class.text-success]="tx.transactionType === 'CREDIT'"
                    [class.text-danger]="tx.transactionType === 'DEBIT'">
                {{ tx.transactionType === 'DEBIT'
                ? '(' + (tx.transactionAmount | currency:'USD') + ')'
                : '+' + (tx.transactionAmount | currency:'USD') }}
              </span>
          </td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
          <td colspan="4" class="text-end"><strong>Total:</strong></td>
          <td>{{ totalSpending | currency:'USD' }}</td>
        </tr>
        </tfoot>
      </table>
    </div>
  </div>
</div>


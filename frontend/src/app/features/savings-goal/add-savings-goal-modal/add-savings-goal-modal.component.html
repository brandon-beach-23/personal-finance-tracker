<!-- Overlay: This provides the modal background effect -->
<div class="modal-overlay" (click)="close()"></div>

<!-- Modal Content Container -->
<div class="modal-dialog-centered">
  <div class="modal-content">

    <h2 class="mb-4 text-center text-primary">Add New Savings Goal</h2>

    <!-- Response Message Area -->
    <div *ngIf="responseMessage"
         class="alert text-center fw-bold"
         [class.alert-success]="responseMessage.includes('successfully')"
         [class.alert-danger]="responseMessage.includes('failed')">
      {{ responseMessage }}
    </div>

    <!-- Form -->
    <form [formGroup]="addSavingsGoalForm" (ngSubmit)="onSubmit()" class="card p-4 shadow-lg border-0">

      <div class="mb-3">
        <label for="goalName" class="form-label">Goal Name</label>
        <input id="goalName" type="text" formControlName="goalName"
               class="form-control"
               placeholder="e.g., Disney Trip"
               [class.is-invalid]="addSavingsGoalForm.get('goalName')?.invalid && addSavingsGoalForm.get('goalName')?.touched">
        <div *ngIf="addSavingsGoalForm.get('goalName')?.invalid && addSavingsGoalForm.get('goalName')?.touched" class="invalid-feedback">
          Goal name is required.
        </div>
      </div>

      <div class="mb-3">
        <label for="targetAmount" class="form-label">Target Amount ($)</label>
        <!-- Type number is critical for financial data input -->
        <input id="targetAmount" type="number" formControlName="targetAmount"
               class="form-control"
               placeholder="0.00"
               [class.is-invalid]="addSavingsGoalForm.get('targetAmount')?.invalid && addSavingsGoalForm.get('targetAmount')?.touched">
        <div *ngIf="addSavingsGoalForm.get('targetAmount')?.invalid && addSavingsGoalForm.get('targetAmount')?.touched" class="invalid-feedback">
          Target amount is required and must be a valid number.
        </div>
      </div>

      <div class="d-grid gap-2">
        <button type="submit" [disabled]="addSavingsGoalForm.invalid" class="btn btn-success btn-lg shadow-sm">
          <i class="bi bi-save me-2"></i> Save Goal
        </button>
        <button type="button" (click)="close()" class="btn btn-outline-secondary">
          Cancel
        </button>
      </div>

    </form>
  </div>
</div>
